# ----------------------------------
# cheddarlogic.com Environment
# ----------------------------------

APP_NAME=cheddarlogic
APP_ENV=local
PUBLIC_DOMAIN=http://localhost:3000

# ----------------------------------
# Database
# ----------------------------------
DATABASE_URL=postgresql://cheddar:cheddar@localhost:5432/cheddarlogic

# ----------------------------------
# Ingestion Providers
# ----------------------------------
ODDS_PROVIDER=
ODDS_API_KEY=
ODDS_BASE_URL=
SPORTS=NBA,NHL,NFL,MLB,NCAAM,SOCCER,FPL

# ----------------------------------
# FPL Sage API
# ----------------------------------
# Backend API URL (cheddar-fpl-sage FastAPI service)
NEXT_PUBLIC_FPL_API_URL=http://localhost:8000/api/v1

# ----------------------------------
# Logging
# ----------------------------------
LOG_LEVEL=INFO

# ----------------------------------
# Optional Caching
# ----------------------------------
REDIS_URL=redis://localhost:6379/0

# ----------------------------------
# Web Configuration
# ----------------------------------
API_BASE_URL=http://localhost:3000
NEXT_PUBLIC_PUBLIC_DOMAIN=http://localhost:3000
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000

# ----------------------------------
# Auth (Phase 1 magic link)
# ----------------------------------
# Change in any non-local environment
AUTH_SECRET=replace-with-strong-random-secret

# Time-to-live values in milliseconds
AUTH_MAGIC_LINK_TTL_MS=900000           # 15 minutes
AUTH_ACCESS_TTL_MS=86400000             # 24 hours (was 15min - this was causing login loops!)
AUTH_REFRESH_TTL_MS=2592000000          # 30 days

# DEV ONLY: Bypass auth for easier local development (set to any email or leave empty)
# WARNING: Never enable this in production!
DEV_BYPASS_AUTH_EMAIL=
NEXT_PUBLIC_DEV_BYPASS_ENABLED=        # Set to "true" to show dev bypass banner on /login
# ----------------------------------
# Worker Scheduler Configuration
# ----------------------------------
# Tick loop interval (milliseconds, default 60000 = 1 minute)
TICK_MS=60000

# Dry run mode (true = log only, no execution)
DRY_RUN=false

# Timezone for fixed-time windows (09:00, 12:00)
# Node convention: TZ env var (not TIMEZONE)
TZ=America/New_York

# Enable fixed-time catchup on scheduler restart
# If true (default), fixed windows run immediately if past due today
# If false, fixed windows only run when clock crosses them (dev mode)
FIXED_CATCHUP=true

# Season gate: disable models for off-season sports to avoid wasted runs
# MLB: re-enable ~March 20 when regular season starts (spring training games don't matter for betting)
# NFL: re-enable ~September 1 when regular season starts
# NCAAM: March Madness runs through ~April 7

# Enable/disable individual jobs
ENABLE_ODDS_PULL=true
ENABLE_NHL_MODEL=true
ENABLE_NBA_MODEL=true
ENABLE_NCAAM_MODEL=true
ENABLE_MLB_MODEL=false
ENABLE_NFL_MODEL=false

# FPL disabled by default until deadline-based scheduler implemented
# (Currently uses game-time windows which is incorrect for FPL)
ENABLE_FPL_MODEL=false

# SQLite database path for worker (if using sql.js)
CHEDDAR_DATA_DIR=/tmp/cheddar-logic
DATABASE_PATH=/tmp/cheddar-logic/cheddar.db
